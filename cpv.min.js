function CPVCounter(t,e,n,i){function o(){v=!1}function r(){if(c){var t=new Image;t.src=n+"?"+Math.floor(1e15*Math.random())}m&&i(e,n)}function a(){0==this.currentTime&&o(),this.currentTime>=e&&!v&&(v=!0,r())}function d(){a(),o()}var v=!1,c=!0,m=!0;"video"===t.tagName.toLowerCase()&&"number"==typeof e&&("string"==typeof n&&/^(https?\:)?\/\//gi.test(n)||(c=!1),"function"!=typeof i&&(m=!1),Object.prototype.addEvent=function(e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,function(){return n.call(t,window.event)})},Object.prototype.removeEvent=function(e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,function(){return n.call(t,window.event)})},this.kill=function(){o(),this.removeEvent("timeupdate",a),this.removeEvent("ended",d)},(e<this.duration||e>0)&&(this.addEvent("timeupdate",a),this.addEvent("ended",d)))}